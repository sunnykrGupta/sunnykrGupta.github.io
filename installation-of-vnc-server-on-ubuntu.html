<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://sunnykrGupta.github.io/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://sunnykrGupta.github.io/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://sunnykrGupta.github.io/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Sunny KUMAR">
  <meta name="description" content="Posts and writings by Sunny KUMAR">


<meta name="keywords" content="vnc, vncserver, ubuntu, desktop installation">

  <title>
    Daemon Blog
&ndash; Installation of VNC server on Ubuntu  </title>

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63834161-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a id="user_meta_logo" href="https://sunnykrGupta.github.io">
        <img src="https://sunnykrGupta.github.io/images/logo.jpg" alt="logo">
      </a>
      <h3><a href="https://sunnykrGupta.github.io">Sunny KUMAR</a></h3>
      <p>Data Engineer, DevOps on Kubernetes, SysAdmin, Programmer, Optimist, Footballer :D</p>
      <nav>
          <h4><a href="https://sunnykrGupta.github.io/pages/projects.html">Project</a></h4>
          <h4><a href="https://sunnykrGupta.github.io/pages/about-me.html">About</a></h4>
          <h4><a href="https://sunnykrGupta.github.io/pages/contact-me.html">Contact</a></h4>
      </nav>
    </div>
  </aside>

  <main>
    <header>
      <nav>
          <a id="github" href="https://github.com/sunnykrGupta" target="_blank"><img src="https://sunnykrGupta.github.io/theme/images/Mono/webicon-github.png" alt="github"></a>
          <a id="twitter" href="https://twitter.com/Sunny_KrGupta" target="_blank"><img src="https://sunnykrGupta.github.io/theme/images/Mono/webicon-twitter.png" alt="twitter"></a>
          <a id="linkedin" href="https://www.linkedin.com/in/sunnykrgupta/" target="_blank"><img src="https://sunnykrGupta.github.io/theme/images/Mono/webicon-linkedin.png" alt="linkedin"></a>
          <a id="googleplus" href="https://plus.google.com/u/0/+SunnyKrGUPTA" target="_blank"><img src="https://sunnykrGupta.github.io/theme/images/Mono/webicon-googleplus.png" alt="googleplus"></a>
          <a id="mail" href="mailto:sunnygupta.kr@gmail.com" target="_blank"><img src="https://sunnykrGupta.github.io/theme/images/Mono/webicon-mail.png" alt="mail"></a>
      </nav>
      <br />
      <p>
        <a href="https://sunnykrGupta.github.io/index.html">Index</a> &nbsp;&nbsp; &brvbar; <a href="https://sunnykrGupta.github.io/archives.html">&nbsp;&nbsp;Archives</a>
      </p>

    </header>

<article>
  <div class="article_title">
    <h3><a href="https://sunnykrGupta.github.io/installation-of-vnc-server-on-ubuntu.html">Installation of VNC server on Ubuntu</a></h3>
  </div>
  <div class="article_text">
    <p>This blog is intended for people who wanted to install GUI or desktop environment on linux <a href="https://en.wikipedia.org/wiki/Server_(computing)">servers</a> running on <a href="https://en.wikipedia.org/wiki/Cloud_computing">cloud</a> and connect.</p>
<p>We are going to use VNC (Virtual Network Computing) protocol for accessing our remote desktop server.</p>
<h4>What is VNC ?</h4>
<p><a href="https://en.wikipedia.org/wiki/Virtual_Network_Computing">Virtual network computing</a>, or VNC, is a graphical desktop sharing system that allows you to control one computer remotely from another. A VNC server transfers keyboard and mouse events, and displays the remote host’s screen via a network connection, which allows you to operate a full <a href="https://en.wikipedia.org/wiki/Desktop_environment">desktop environment</a>.</p>
<p>Basically ubuntu server and ubuntu cloud editions does not contains GUI, which needs to be installed before installing VNC server. Please note that server and cloud editions are carefully designed to utilize less hardware resources ( minimal environment ), installing GUI might leads to high hardware utilization.</p>
<h4>Why i need GUI in remote server ?</h4>
<p>Just to explain a use case, let me tell me you how i landed up using VNC in first place. I was working on a problem which relates with cloud latency issue. My Friend, <a href="https://www.linkedin.com/in/neekneeraj/">Neeraj</a> <sub>(whose work revolves around core JS research &amp; development)</sub> had a javascript code that makes an <a href="(https://en.wikipedia.org/wiki/Web_API)">HTTP API</a> call to a <a href="https://en.wikipedia.org/wiki/Cloud_load_balancing">loadbalancer</a> near to the geographical location of browser and response will be delivered from proximity based loadbalancer in that geographic region. To test this setup and execute my JS and use developer console to see what's happening under the network layer, i needed a browser engine in different location. I could have used some online paid or free service to get browser rented, services like <a href="https://www.browserstack.com/">browserstack</a> or other alternatives but that has free minutes based trial restrictions.</p>
<hr>
<h3>Install a Desktop and VNC Server on Ubtunu 14.04</h3>
<h5>Step 1 - Install Ubuntu desktop</h5>
<p>Start installing below <em>gnome packages</em> which helps VNC to load properly . These packages are required for all editions including <em>ubuntu desktop</em> .</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install --no-install-recommends ubuntu-desktop gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal gnome-core
</pre></div>


<h5>Step 2 - Install vnc4server package.</h5>
<div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install vnc4server
</pre></div>


<h5>Step 3 - Make configuration changes in vncserver</h5>
<p>Open <code>/usr/bin/vncserver</code> file and edit as follows . Before editing, make a backup copy.</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo cp /usr/bin/vncserver /usr/bin/vncserver.bkp

<span class="nv">$ </span>sudo vim /usr/bin/vncserver

<span class="c">#Find this line &quot;# exec /etc/X11/xinit/xinitrcnn&quot;.</span>
<span class="c">#and add these lines like below</span>

    <span class="s2">&quot;# exec /etc/X11/xinit/xinitrcnn&quot;</span>.
       <span class="s2">&quot;gnome-panel &amp;n&quot;</span>.
       <span class="s2">&quot;gnome-settings-daemon &amp;n&quot;</span>.
       <span class="s2">&quot;metacity &amp;n&quot;</span>.
       <span class="s2">&quot;nautilus &amp;n&quot;</span>.
       <span class="s2">&quot;gnome-terminal &amp;n&quot;</span>.
</pre></div>


<h5>Step 4 - Start your vncserver</h5>
<p>Now type the command <code>vncserver</code> to start VNC session. you will be prompted for creating new vnc password.</p>
<div class="highlight"><pre><span class="nv">$ </span>vncserver
You will require a password to access your desktops through VNC Clients.
Password:******
Verify:******

xauth: file /root/.Xauthority does not exist
New <span class="s1">&#39;ubuntu-desktop:1 (root)&#39;</span> desktop is ubuntu-desktop:1

Starting applications specified in /root/.vnc/xstartup
Log file is /root/.vnc/ubuntu-desktop:1.log
</pre></div>


<h5>Step 5 - To check VNC server has started, follow</h5>
<div class="highlight"><pre><span class="nv">$ </span>netstat -tulpn

Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:6001            0.0.0.0:*               LISTEN      28372/Xvnc4
tcp6       <span class="m">0</span>      <span class="m">0</span> :::5901                 :::*                    LISTEN      28372/Xvnc4
</pre></div>


<blockquote>
<p>VNC server is running and listening on <strong>5901 port</strong>. Make sure your firewall allows <strong>inbound</strong> TCP connection to this port.</p>
</blockquote>
<h5>Step 6 - Configure your Firewall</h5>
<p>If <strong>firewall</strong> is active, you need to open ports for inbound communication. If no firewall is enabled, you can skip this section.</p>
<div class="highlight"><pre><span class="c">#allow SSH</span>
<span class="nv">$ </span>sudo ufw allow OpenSSH

<span class="c">#allowing single port 5901 port</span>
<span class="nv">$ </span>sudo ufw allow 5901/tcp

<span class="c">#To allow series of port 5901 - 5910, follow</span>
<span class="nv">$ </span>sudo ufw allow 5901:5910/tcp

<span class="c">#To check firewall rules</span>
<span class="nv">$ </span>sudo  ufw status verbose

Status: active
Logging: on <span class="o">(</span>low<span class="o">)</span>
Default: deny <span class="o">(</span>incoming<span class="o">)</span>, allow <span class="o">(</span>outgoing<span class="o">)</span>, disabled <span class="o">(</span>routed<span class="o">)</span>
New profiles: skip

To                         Action      From
--                         ------      ----
22/tcp <span class="o">(</span>OpenSSH<span class="o">)</span>           ALLOW IN    Anywhere
5901:5910/tcp              ALLOW IN    Anywhere
22/tcp <span class="o">(</span>OpenSSH <span class="o">(</span>v6<span class="o">))</span>      ALLOW IN    Anywhere <span class="o">(</span>v6<span class="o">)</span>
5901:5910/tcp <span class="o">(</span>v6<span class="o">)</span>         ALLOW IN    Anywhere <span class="o">(</span>v6<span class="o">)</span>WW
</pre></div>


<blockquote>
<p><strong><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-14-04">Good reads on configuring UFW firewall</a></strong></p>
</blockquote>
<h5>Step 7 - Connect to VNC Server</h5>
<div style="text-align: right"><sub>Connect -Remote Desktop Viewer</sub></div>

<p><img alt="VNC Connect" src="/images/vnc/vnc-connect.png" title="VNC Connect"></p>
<div style="text-align: right"><sub>Launch Firefox from Terminal</sub></div>

<p><img alt="Launch Firefox" src="/images/vnc/vnc-launch-firefox.png" title="Launch Firefox"></p>
<div style="text-align: right"><sub>Google UK</sub></div>

<p><img alt="Google UK" src="/images/vnc/vnc-google-uk.png" title="Google UK"></p>
<p>That’s it, your VNC server is working.</p>
<blockquote>
<p>Here my linux server is in london, UK. I opened firefox through terminal reach out to google. It opened google.co.uk. You can do lot of other stuffs on VNC protocol to get things done from remote location.</p>
</blockquote>
  </div>
  <div class="article_meta">
    <p>Posted on: Mon 04 September 2017</p>
    <p>Category: <a href="https://sunnykrGupta.github.io/category/blog.html">Blog</a>
 &ndash; Tags:
      <a href="https://sunnykrGupta.github.io/tag/vnc.html">vnc</a>,      <a href="https://sunnykrGupta.github.io/tag/vncserver.html">vncserver</a>,      <a href="https://sunnykrGupta.github.io/tag/ubuntu.html">ubuntu</a>,      <a href="https://sunnykrGupta.github.io/tag/desktop-installation.html">desktop installation</a>    </p>
  </div>
  <section>
      <p id="post-share-links">
          Share on:
          <a href="https://twitter.com/home?status=Installation%20of%20VNC%20server%20on%20Ubuntu%20https%3A//sunnykrGupta.github.io/installation-of-vnc-server-on-ubuntu.html" target="_blank" title="Share on Twitter"><img src="https://sunnykrGupta.github.io/theme/images/Share/twitter.svg" alt="twitter"></a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//sunnykrGupta.github.io/installation-of-vnc-server-on-ubuntu.html" target="_blank" title="Share on Facebook"><img src="https://sunnykrGupta.github.io/theme/images/Share/facebook.svg" alt="facebook"></a>
          <a href="https://plus.google.com/share?url=https%3A//sunnykrGupta.github.io/installation-of-vnc-server-on-ubuntu.html" target="_blank" title="Share on Google Plus"><img src="https://sunnykrGupta.github.io/theme/images/Share/googleplus.svg" alt="google+"></a>
          <a href="mailto:?subject=Installation%20of%20VNC%20server%20on%20Ubuntu&amp;body=https%3A//sunnykrGupta.github.io/installation-of-vnc-server-on-ubuntu.html" target="_blank" title="Share via Email"><img src="https://sunnykrGupta.github.io/theme/images/Share/mail.svg" alt="email"></a>
      </p>
  </section>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "installation-of-vnc-server-on-ubuntu.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'https://sunnydaemon.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; Sunny KUMAR. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. Member of the <a href="http://internetdefenseleague.org">Internet Defense League</a>.</p>
    </div>
  </main>

  <div id="right-feed">
    <a class="twitter-timeline" href="https://twitter.com/sunnyLAGupta" data-widget-id="605800181926199296">Tweets by @sunnyLAGupta</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </div>
<script type="text/javascript">
  window._idl = {};
  _idl.variant = "banner";
  (function() {
    var idl = document.createElement('script');
    idl.type = 'text/javascript';
    idl.async = true;
    idl.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'members.internetdefenseleague.org/include/?url=' + (_idl.url || '') + '&campaign=' + (_idl.campaign || '') + '&variant=' + (_idl.variant || 'banner');
    document.getElementsByTagName('body')[0].appendChild(idl);
  })();
</script>
</body>
</html>